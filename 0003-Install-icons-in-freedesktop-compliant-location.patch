From 4a489d98e047d9208638e430198f10441091e5c1 Mon Sep 17 00:00:00 2001
From: Ghislain Antony Vaillant <ghisvail@users.noreply.github.com>
Date: Sun, 29 Aug 2021 12:32:29 +0200
Subject: [PATCH] Install icons in freedesktop compliant location

See https://specifications.freedesktop.org/icon-theme-spec

Same behavior as with bsnes and higan.
---
 desktop-ui/GNUmakefile | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

diff --git a/desktop-ui/GNUmakefile b/desktop-ui/GNUmakefile
index f7caa849c..02ad50bf3 100644
--- a/desktop-ui/GNUmakefile
+++ b/desktop-ui/GNUmakefile
@@ -101,12 +101,12 @@ else ifeq ($(platform),macos)
 else ifneq ($(filter $(platform),linux bsd),)
 	mkdir -p $(prefix)/bin/
 	mkdir -p $(prefix)/share/applications/
-	mkdir -p $(prefix)/share/icons/
+	mkdir -p $(prefix)/share/icons/hicolor/256x256/apps/
 	mkdir -p $(prefix)/share/$(name)/Shaders/
 	cp $(output.path)/$(name) $(prefix)/bin/$(name)
 	cp -R $(ares.path)/Shaders/* $(prefix)/share/$(name)/Shaders/
 	cp resource/$(name).desktop $(prefix)/share/applications/$(name).desktop
-	cp resource/$(name).png $(prefix)/share/icons/$(name).png
+	cp resource/$(name).png $(prefix)/share/icons/hicolor/256x256/apps/$(name).png
 endif
 
 uninstall:
@@ -118,7 +118,7 @@ else ifeq ($(platform),macos)
 else ifneq ($(filter $(platform),linux bsd),)
 	rm -f $(prefix)/bin/$(name)
 	rm -f $(prefix)/share/applications/$(name).desktop
-	rm -f $(prefix)/share/icons/$(name).png
+	rm -f $(prefix)/share/icons/hicolor/256x256/apps/$(name).png
 endif
 
 -include $(object.path)/*.d
