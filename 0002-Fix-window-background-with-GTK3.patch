From 14c7efbf57f2299a89f9d0edd02d70eebce03568 Mon Sep 17 00:00:00 2001
From: Ghislain Antony Vaillant <ghisvail@gmail.com>
Date: Sat, 28 Aug 2021 01:12:17 +0200
Subject: [PATCH] Fix window background with GTK3

---
 desktop-ui/presentation/presentation.cpp | 5 ++++-
 desktop-ui/presentation/presentation.hpp | 6 ++++--
 2 files changed, 8 insertions(+), 3 deletions(-)

diff --git a/desktop-ui/presentation/presentation.cpp b/desktop-ui/presentation/presentation.cpp
index a03a22411..681aad11d 100644
--- a/desktop-ui/presentation/presentation.cpp
+++ b/desktop-ui/presentation/presentation.cpp
@@ -188,6 +188,10 @@ Presentation::Presentation() {
     viewport.doDrop(filenames);
   });
 
+  iconPadding.setCollapsible().setColor({0, 0, 0}).setDroppable().onDrop([&](auto filenames) {
+    viewport.doDrop(filenames);
+  });
+
   iconBottom.setCollapsible().setColor({0, 0, 0}).setDroppable().onDrop([&](auto filenames) {
     viewport.doDrop(filenames);
   });
@@ -206,7 +210,6 @@ Presentation::Presentation() {
 
   resizeWindow();
   setTitle({ares::Name, " v", ares::Version});
-  setBackgroundColor({0, 0, 0});
   setAlignment(Alignment::Center);
   setVisible();
 
diff --git a/desktop-ui/presentation/presentation.hpp b/desktop-ui/presentation/presentation.hpp
index 6971ab729..5fe0c8c79 100644
--- a/desktop-ui/presentation/presentation.hpp
+++ b/desktop-ui/presentation/presentation.hpp
@@ -64,9 +64,11 @@ struct Presentation : Window {
   VerticalLayout layout{this};
     HorizontalLayout viewportLayout{&layout, Size{~0, ~0}, 0};
       Viewport viewport{&viewportLayout, Size{~0, ~0}, 0};
-      VerticalLayout iconLayout{&viewportLayout, Size{138, ~0}, 0};
+      VerticalLayout iconLayout{&viewportLayout, Size{128, ~0}, 0};
         Canvas iconSpacer{&iconLayout, Size{128, ~0}, 0};
-        Canvas iconCanvas{&iconLayout, Size{128, 128}, 0};
+        HorizontalLayout iconHorizontal{&iconLayout, Size{128, 128}, 0};
+          Canvas iconCanvas{&iconHorizontal, Size{112, 128}, 0};
+          Canvas iconPadding{&iconHorizontal, Size{16, 128}, 0};
         Canvas iconBottom{&iconLayout, Size{128, 10}, 0};
     HorizontalLayout statusLayout{&layout, Size{~0, StatusHeight}, 0};
       Label spacerLeft{&statusLayout, Size{8, ~0}, 0};
-- 
2.33.0

